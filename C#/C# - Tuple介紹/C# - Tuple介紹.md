# C# Tuple 介紹

## 前言

當我們在做函數的回傳值時，通常只可傳回一個回傳值，當你想要回傳兩個以上的參數時，我們一般的作法有三種：

> 1. 第一種方法，使用 ref 與 out 關鍵字，out 跟 ref 的用法可以讓在方法內所有修改的參數，在方法結束之後，參數也還是會保持修改後的狀態，不過如果有很多參數要回傳，程式的可讀性就會降低，以至於這個方法雖好但還是美中不足。
>
> 2.  第二種方法是寫成結構或是類別的方式做資料的回傳，在這邊我比較不喜歡這種方法的原因是因為，這會對你的程式碼在維護性上降低，也可能這個類別只專門為這個方法使用這樣就浪費了。
>
> 3. 第三種方法，使用全域變數或是靜態變數的方式去操作，這個方法也不是很理想，這使得大家都有可能去操作到這個變數，會有副作用的問題。

基於上述三點，本篇介紹Tuple來達成上述的效果。

## 使用 Tuple

Tuple 就是一種拋棄式的資料傳輸物件，讓你將多筆資料透過它進行資料的傳輸。

首先來看看它裡面的內容，在函式的回傳部分宣告 Tuple，並定義好它要回傳 3 個 int，宣告好後，在函式結束回傳的部分使用 Tuple.Create(T, T, T)，這邊的 T 要根據你回傳值裡面 Tuple 的型別，因為我在裡面宣告 int，所以我回傳一定是用 int 去回傳，如下程式碼所示：

```cs
public Tuple<int, int, int> TupleTest() 
{
  int a = 10;
  int b = 20;
  int c = 30;

  return Tuple.Create(a, b, c);
}
```

當你要讀取裡面的內容的時候，此時就可以看出 var 的好處了，使用一個 var 變數去接收回傳值，然後使用**名稱.item1**、**名稱.item2**等以此類推，來對裡面內容讀值，程式碼如下所示：

```cs
public MainWindow() 
{
  InitializeComponent();
  var test = TupleTest();
  MessageBox.Show(text.Item2.ToString());
}
```

以下將說明到達8以上的參數時，應該如何去宣告與回傳，基本上，參數回傳的部分，透過 Tuple\<T1, T2, T3, T4, T5, T6, T7, TRest\> 類別，第 8 個 TRest 代表其他的
Item, Item8 的型別也是 Tuple ，透過這種方式來達成無限多層 Tuple
的結構可以到達無窮，雖然這種做法很方便，但建議回傳得參數還是不要太多比較好，會造成程式碼可讀性下降，而且最好再加上註解，畢竟之後回來再看程式碼時，才不會再猜想說到底 item1 是甚麼東西。8 個回傳參數使用方法如下：

```cs
public Tuple<int, int, int, int, int, int, int, Tuple<Tuple<int, int, int>>> test() 
{
  return Tuple.Create(1, 2, 3, 4, 5, 6, 7, Tuple.Create(10, 20, 30));
}
```

最後再做個提醒，在使用Tuple的時候，每個回傳的 item 做好加上註解，為往後程式維護增加易讀性；呼叫完後，就不要再直接往外丟，最好再呼叫的地方就將邏輯判斷做個結束會比較好。
